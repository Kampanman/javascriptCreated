<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajax 4 -AJAX & PHP Forms</title>
</head>
<body>
  <button id="button">Get Name</button>
  <h1>NOMAL GET FORM</h1>
  <form action="process.php" method="get">
    <input type="text" name="name">
    <input type="submit" value="Submit">
  </form>

  <h1>AJAX GET FORM</h1>
  <form id="getForm">
    <input type="text" name="name" id="name1">
    <input type="submit" value="Submit">
  </form>
  <p id="getText"></p>

  <h1>AJAX POST FORM</h1>
  <form id="postForm">
    <input type="text" name="name" id="name2">
    <input type="submit" value="Submit">
  </form>
  <p id="postText"></p>
<script>
  function _(id){ return document.getElementById(id); }
  function getName(e){
    e.preventDefault();

    var name = _("name1").value;

    var xhr = new XMLHttpRequest();
    xhr.open("GET", `process.php?name=${name}`, true);
    xhr.onload = function(){
      _("getText").innerHTML = this.responseText;
    }
    xhr.send();
  }

  function postName(e){
    e.preventDefault();

    var name = _("name2").value;
    var param = "name="+name;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "process.php", true);
    xhr.setRequestHeader("content-type","application/x-www-form-urlencoded");

    xhr.onload = function(){
      _("postText").innerHTML = this.responseText;
    }
    xhr.send(param);
  }

  _("button").addEventListener("click",getName);
  _("getForm").addEventListener("submit",getName);
  _("postForm").addEventListener("submit",postName);
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajax 2 - JSON File</title>
</head>
<body>
  <button id="button1">Get User</button>
  <button id="button2">Get Users</button>
  <p id="getUserRequest"></p>
  <p id="getUsersRequests"></p>

<script>
  function _(id){ return document.getElementById(id); }
  function loadUser(){
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "user.json", true);
    xhr.onload = function(){
      if(this.status==200){
        var user = JSON.parse(this.responseText);
        console.log(user.name);
        var output = "";
        output += "<ul>";
        output += "<li>ID: "+user.id+"</li><li>ID: "+user.name+"</li><li>ID: "+user.email+"</li>";
        output += "</ul>";
        _("getUserRequest").innerHTML = output;
      }
    }
    xhr.send();
  }
  function loadUsers(){
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "users.json", true);
    xhr.onload = function(){
      if(this.status==200){
        var users = JSON.parse(this.responseText);
        
        var output = "";
        for(var i in users){
          output += "<ul>";
          output += "<li>ID: "+users[i].id+"</li><li>ID: "+users[i].name+"</li><li>ID: "+users[i].email+"</li>";
          output += "</ul>";        
        }
        _("getUsersRequests").innerHTML = output;
      }
    }
    xhr.send();    
  }

  _("button1").addEventListener("click",loadUser);
  _("button2").addEventListener("click",loadUsers);
</script>
</body>
</html>